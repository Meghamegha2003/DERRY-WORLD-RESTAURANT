<%- include('../partials/admin/header') %>

<div class="container mt-4">
    <h2>Search Results for "<%= searchQuery %>"</h2>
    
    <!-- Customers Section -->
    <% if (customers && customers.length > 0) { %>
        <div class="mt-4">
            <h3>Customers</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% customers.forEach(user => { %>
                            <tr>
                                <td><%= user.name %></td>
                                <td><%= user.email %></td>
                                <td><%= user.isBlocked ? 'Blocked' : 'Active' %></td>
                                <td>
                                    <a href="/admin/user-details/<%= user._id %>" class="btn btn-info btn-sm">View Details</a>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    <% } %>

    <!-- Orders Section -->
    <% if (orders && orders.length > 0) { %>
        <div class="mt-4">
            <h3>Orders</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Order Number</th>
                            <th>Customer</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% orders.forEach(order => { %>
                            <tr>
                                <td><%= order.orderNumber %></td>
                                <td><%= order.user?.name || 'N/A' %></td>
                                <td><%= order.status %></td>
                                <td>
                                    <a href="/admin/orders/<%= order._id %>" class="btn btn-info btn-sm">View Order</a>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    <% } %>

    <!-- Products Section -->
    <% if (products && products.length > 0) { %>
        <div class="mt-4">
            <h3>Products</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(product => { %>
                            <tr>
                                <td><%= product.name %></td>
                                <td><%= product.description %></td>
                                <td>
                                    <a href="/admin/products/<%= product._id %>" class="btn btn-info btn-sm">View Product</a>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    <% } %>

    <% if ((!customers || customers.length === 0) && (!orders || orders.length === 0) && (!products || products.length === 0)) { %>
        <div class="alert alert-info mt-4">
            No results found for your search query.
        </div>
    <% } %>
    
    <div class="mt-4">
        <a href="/admin/dashboard" class="btn btn-secondary">Back to Dashboard</a>
    </div>
</div>

<%- include('../partials/admin/footer') %>